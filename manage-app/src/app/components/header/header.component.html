<header class="header" (click)="menuOff()">
  <div class="container header__container">
    <div class="header__menu">
      <div class="header__logo" routerLink="">
        <svg class="header__svg" xmlns="http://www.w3.org/2000/svg" height="40" width="40">
          <path
            d="m28.333 21.542-9.875-9.875 9.875-9.834 9.834 9.834ZM3.25 18.458v-14h13.958v14ZM21.542 36.75V22.792h14V36.75Zm-18.292 0V22.792h13.958V36.75Z" />
        </svg>
        <p class="header__title">
          PMA
        </p>
        <span class="hover-name">{{ 'header.main' | translate }}</span>
      </div>
      <div class="header__boards" *ngIf="storageService.hasToken()" routerLink="/boards">
        <svg class="header__svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" height="45" width="45">
          <path
            d="M5 5h13.625v13.625H5Zm16.375 0H35v13.625H21.375ZM5 21.375h13.625V35H5Zm21.792 0h2.791v5.417H35v2.791h-5.417V35h-2.791v-5.417h-5.417v-2.791h5.417Z" />
        </svg>
        <span class="hover-name">{{ 'header.boards' | translate }}</span>
      </div>
      <div class="search" *ngIf="storageService.hasToken()">
        <input
          class="search__input"
          [(ngModel)]="searchString"
          (keyup)="search()"
          (focus)="changeFocusOn()"
          (focusout)="changeFocusOff()"
          type="text"
          [placeholder]="'header.search' | translate"
        >
        <div *ngIf="isFocus" class="search__content">
          <div class="loader" *ngIf="loaderService.isLoading | async">
            <mat-spinner color="warn" mode="indeterminate"></mat-spinner>
          </div>
          <h6 class="search__content-title">{{'header.find' | translate}}</h6>
          <div class="search__tasks">
            <a class="search__task-item" [routerLink]="['/boards', task.boardId]"
              *ngFor="let task of searchService.filterTasks; let i = index">
              <span class="index">{{i + 1}}</span>
              <span class="task-name">{{task.title}}</span>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="header__menu-burger" (click)="menuSwitch($event)">
      <svg fill="#fff" xmlns="http://www.w3.org/2000/svg" height="48" width="48" viewBox="0 0 48 48"><path d="M6 36v-3h36v3Zm0-10.5v-3h36v3ZM6 15v-3h36v3Z"/></svg>
    </div>
    <div class="header__menu-box" [@menuInOut]="isMenu" (click)="menuOff()">
      <div class="header__logo-box" routerLink="" (click)="menuOff()">
        <svg class="header__svg" xmlns="http://www.w3.org/2000/svg" height="40" width="40">
          <path
            d="m28.333 21.542-9.875-9.875 9.875-9.834 9.834 9.834ZM3.25 18.458v-14h13.958v14ZM21.542 36.75V22.792h14V36.75Zm-18.292 0V22.792h13.958V36.75Z" />
        </svg>
        <p class="header__title">
          PMA
        </p>
      </div>
      <div class="search" *ngIf="storageService.hasToken()" (click)="falsyClick($event)">
        <input
          class="search__input"
          [(ngModel)]="searchString"
          (keyup)="search()"
          (focus)="changeFocusOn()"
          (focusout)="changeFocusOff()"
          type="text"
          [placeholder]="'header.search' | translate"
        >
        <div *ngIf="isFocus" class="search__content">
          <h6 class="search__content-title">{{'header.find' | translate}}</h6>
          <div class="search__tasks">
            <a class="search__task-item" [routerLink]="['/boards', task.boardId]"
              *ngFor="let task of searchService.filterTasks; let i = index" (click)="menuOff()">
              <span class="index">{{i + 1}}</span>
              <span class="task-name">{{task.title}}</span>
            </a>
          </div>
        </div>
      </div>
      <div class="header__boards-box" *ngIf="storageService.hasToken()" routerLink="/boards" (click)="menuOff()">
        {{ 'boards.title' | translate }}
      </div>
    </div>
    <div class="header__buttons">
      <div class="language">
        <select class="select" name="language" (change)="changeLang($event)">
          <option value="en">en</option>
          <option value="ru">ru</option>
        </select>
      </div>
      <div class="header__login" *ngIf="!storageService.hasToken(); else login">
        <button class="log-btn button" routerLink="/signin">
          {{ 'header.signin' | translate }}
        </button>
        <button class="log-btn button" routerLink="/signup">
          {{ 'header.signup' | translate }}
        </button>
      </div>
    </div>
  </div>
</header>

<ng-template #login>
  <div class="header__name">{{ storageService.user?.name | titlecase }}</div>
  <div class="header__user" routerLink="profile">
    <img src="./assets/profile-img.jpg" class="header__profile-icon">
  </div>
  <button class="header__logout button log-btn" (click)="logout()">{{ 'header.logout' | translate }}</button>
</ng-template>