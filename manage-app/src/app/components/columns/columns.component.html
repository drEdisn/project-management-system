<div class="container columns">
  <div class="columns__container">
    <div class="loader" *ngIf="loaderService.isLoading | async">
      <mat-spinner color="warn" mode="indeterminate"></mat-spinner>
    </div>
    <div class="columns__head">
      <button class="back" (click)="goBack()">
        <svg fill="white" xmlns="http://www.w3.org/2000/svg" height="24" width="24">
          <path d="m14 18-6-6 6-6 1.4 1.4-4.6 4.6 4.6 4.6Z" />
        </svg>
      </button>
      <div class="columns__title">
        Board: <span class="columns__id">{{ boardName }}</span>
      </div>
    </div>
    <div
    cdkDropListGroup
    cdkDropList
    [cdkDropListData]="boardsService.columns"
    cdkDropListOrientation="horizontal"
    (cdkDropListDropped)="drop($event)"
    class="columns__content">
      <div cdkDrag class="columns__item" *ngFor="let column of boardsService.columns">
        <div class="columns__name" (click)="changeColumn(column.id)">{{ column.title }}</div>
        <div
        class="tasks"
        cdkDropList
        [cdkDropListData]="getTasks(column.id)"
        (cdkDropListDropped)="dropTask($event)"
        >
          <app-task
            cdkDrag
            *ngFor="let task of getTasks(column.id)"
            [task]="task"
            [tasks]="tasks"
            (click)="changeTask(column.id, task.id)"
          ></app-task>
        </div>
        <div class="columns__setting">
          <button class="add-item" (click)="addTask(column.id)">Add Task</button>
          <button class="button delete-item" (click)="removeColumn(column.id)">
            <svg class="delete-item" xmlns="http://www.w3.org/2000/svg" height="24" width="24">
              <path
                d="M7 21q-.825 0-1.412-.587Q5 19.825 5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413Q17.825 21 17 21ZM17 6H7v13h10ZM9 17h2V8H9Zm4 0h2V8h-2ZM7 6v13Z" />
            </svg>
          </button>
        </div>
      </div>
      <div class="columns__item empty" (click)="addColumn()">
        <h6 class="empty__title">+Add new column</h6>
      </div>
      <app-modal-add
        [title]="modalTitle"
        [button]="modalButton"
        *ngIf="modalAddService.isVisible"
        [tasks]="tasks"
      ></app-modal-add>
    </div>
  </div>
</div>