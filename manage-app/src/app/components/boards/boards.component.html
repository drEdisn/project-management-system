<div class="contianer boards">
  <div class="boards__container">
    <div class="loader" *ngIf="loaderService.isLoading | async">
      <mat-spinner color="warn" mode="indeterminate"></mat-spinner>
    </div>
    <h2 class="boards__title title">Boards</h2>
    <div class="boards__content">
      <div class="boards__item" *ngFor="let board of boardsService.boards">
        <div class="link" [routerLink]="['/boards', board.id]"></div>
        <div class="setting">
          <span class="setting__edit" (click)="changeBoardModal(board.id)">
            <svg class="setting__svg" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M5 19h1.4l8.625-8.625-1.4-1.4L5 17.6ZM19.3 8.925l-4.25-4.2 1.4-1.4q.575-.575 1.413-.575.837 0 1.412.575l1.4 1.4q.575.575.6 1.388.025.812-.55 1.387ZM17.85 10.4 7.25 21H3v-4.25l10.6-10.6Zm-3.525-.725-.7-.7 1.4 1.4Z"/></svg>
          </span>
          <span class="setting__change-bg">
            <svg class="setting__bg" xmlns="http://www.w3.org/2000/svg" height="24" width="24">
              <path
                d="m9.25 22-.4-3.2q-.325-.125-.612-.3-.288-.175-.563-.375L4.7 19.375l-2.75-4.75 2.575-1.95Q4.5 12.5 4.5 12.337v-.675q0-.162.025-.337L1.95 9.375l2.75-4.75 2.975 1.25q.275-.2.575-.375.3-.175.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3.287.175.562.375l2.975-1.25 2.75 4.75-2.575 1.95q.025.175.025.337v.675q0 .163-.05.338l2.575 1.95-2.75 4.75-2.95-1.25q-.275.2-.575.375-.3.175-.6.3l-.4 3.2Zm2.8-6.5q1.45 0 2.475-1.025Q15.55 13.45 15.55 12q0-1.45-1.025-2.475Q13.5 8.5 12.05 8.5q-1.475 0-2.488 1.025Q8.55 10.55 8.55 12q0 1.45 1.012 2.475Q10.575 15.5 12.05 15.5Zm0-2q-.625 0-1.062-.438-.438-.437-.438-1.062t.438-1.062q.437-.438 1.062-.438t1.063.438q.437.437.437 1.062t-.437 1.062q-.438.438-1.063.438ZM12 12Zm-1 8h1.975l.35-2.65q.775-.2 1.438-.588.662-.387 1.212-.937l2.475 1.025.975-1.7-2.15-1.625q.125-.35.175-.738.05-.387.05-.787t-.05-.788q-.05-.387-.175-.737l2.15-1.625-.975-1.7-2.475 1.05q-.55-.575-1.212-.963-.663-.387-1.438-.587L13 4h-1.975l-.35 2.65q-.775.2-1.437.587-.663.388-1.213.938L5.55 7.15l-.975 1.7 2.15 1.6q-.125.375-.175.75-.05.375-.05.8 0 .4.05.775t.175.75l-2.15 1.625.975 1.7 2.475-1.05q.55.575 1.213.962.662.388 1.437.588Z" />
            </svg>
          </span>
        </div>
        <div class="boards__name">
          {{ board.title }}
        </div>
        <button class="boards__delete button" (click)="removeBoard(board.id)">
          <svg fill="white" xmlns="http://www.w3.org/2000/svg" height="24" width="24">
            <path
              d="M7 21q-.825 0-1.412-.587Q5 19.825 5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413Q17.825 21 17 21ZM17 6H7v13h10ZM9 17h2V8H9Zm4 0h2V8h-2ZM7 6v13Z" />
          </svg>
        </button>
      </div>
      <div
        class="boards__empty"
        *ngIf="!isCreated; else boardForm"
        (click)="changeCreated()"
      >
        <span class="boards__empty-text">+Add board</span>
      </div>
    </div>
    <app-modal-add button="Change" title="Change" *ngIf="modalAddService.isVisible"></app-modal-add>
  </div>
</div>

<ng-template #boardForm>
  <form class="boards__empty hovered" [formGroup]="form" (ngSubmit)="submitForm()">
    <div class="boards__input">
      <app-input nameTitle="title" [value]="form.controls">
        <input
          class="input"
          type="text"
          formControlName="title"
          [(ngModel)]="title"
          autofocus
        >
      </app-input>
      <ng-container *ngTemplateOutlet="errors; context: form.controls.title"></ng-container>
    </div>
    <div class="buttons">
      <button type="submit" class="boards__empty-btn button" [disabled]="!form.valid">
        Create
      </button>
      <button
        type="button"
        class="boards__empty-btn cansel button"
        (click)="changeCreated()"
      >
        Cancel
      </button>
    </div>
  </form>
</ng-template>

<ng-template #errors let-errors="errors" let-touched="touched">
  <div
    class="sign__error"
    *ngIf="errors?.required && touched"
  >
    This field is required *
  </div>
  <div
    class="sign__error"
    *ngIf="errors?.minlength && touched"
  >
    Minimal length is {{ errors?.minlength.requiredLength }}
  </div>
</ng-template>