<div class="contianer sign-container">
  <div class="loader" *ngIf="loaderService.isLoading | async">
    <mat-spinner color="warn" mode="indeterminate"></mat-spinner>
  </div>
  <div class="profile">
    <img src="../../../assets/profile-bg.jpg" alt="bg" class="profile__bg">
    <img src="../../../assets/profile-img.jpg" alt="avatar" class="profile__image">
    <div class="profile__info" *ngIf="!isChange; else change">
      <div class="info__item">
        <span class="item__name">{{ 'login.name' | translate }}</span>
        <span class="item__name-value">{{ storageService.user?.name | titlecase }}</span>
        <button class="item__button button" (click)="onChange('name')">{{ 'boards.change-btn' | translate }}</button>
      </div>
      <div class="info__item">
        <span class="item__name">{{ 'login.login' | translate }}</span>
        <span class="item__name-value">{{ storageService.user?.login }}</span>
        <button class="item__button button" (click)="onChange('login')">{{ 'boards.change-btn' | translate }}</button>
      </div>
      <div class="info__item">
        <span class="item__name">{{ 'login.password' | translate }}</span>
        <span class="item__name-value">{{ storageService.password | password: false }}</span>
        <button class="item__button button" (click)="onChange('password')">{{ 'boards.change-btn' | translate }}</button>
      </div>
      <div class="info__item">
        <span class="item__name">{{ 'profile.avatar' | translate }}</span>
        <label for="file-upload" class="file">
          <svg fill="white" xmlns="http://www.w3.org/2000/svg" height="24" width="24">
            <path
              d="M10.95 20.2H6.525q-2.375 0-4.037-1.625Q.825 16.95.825 14.6.825 12.575 2 11q1.175-1.575 3.125-2.025.65-2.325 2.563-3.75Q9.6 3.8 12 3.8q2.95 0 5.025 2.037 2.075 2.038 2.15 4.988 1.75.275 2.875 1.6 1.125 1.325 1.125 3.1 0 1.95-1.363 3.312Q20.45 20.2 18.5 20.2h-5.45v-7.05l1.65 1.6 1.45-1.475L12 9.125l-4.15 4.15L9.3 14.75l1.65-1.6Z" />
          </svg>
          {{ 'profile.upload' | translate }}
        </label>
        <input id="file-upload" type="file">
      </div>
      <button class="button remove" (click)="removeAccount()">{{ 'profile.remove-btn' | translate }}</button>
    </div>
  </div>
  <app-modal-warn *ngIf="modalWarnService.isOpen"></app-modal-warn>
</div>

<ng-template #change>
  <div class="profile__info">
    <form class="form" [formGroup]="form" (ngSubmit)="changeUser()">
      <div class="inputs">
        <app-input [nameTitle]="changeValue.title" [pathTitle]="changeValue.path" [value]="form.controls">
          <input
            class="input"
            [type]="changeValue.title === 'password' ? changeValue.title : 'text'"
            [formControlName]="changeValue.title"
          >
        </app-input>
        <ng-container *ngTemplateOutlet="errors; context:getInput(form, changeValue.title)"></ng-container>
      </div>
      <div class="change__buttons">
        <button type="submit" class="change__confirm button" [disabled]="!form.valid">
          {{ 'boards.confirm-btn' | translate }}
        </button>
        <button type="button" class="change__back button" (click)="onChange()">
          {{ 'boards.back-btn' | translate }}
        </button>
      </div>
    </form>
    <app-modal *ngIf="modalService.isVisible"></app-modal>
  </div>
</ng-template>

<ng-template
  #errors
  let-errors="errors"
  let-touched="touched"
  >
  <app-errors [errors]="errors" [touched]="touched"></app-errors>
</ng-template>